Lane Following

The Lane-Following behaviour of the SmartCar will have two major components. First, we will take the image from the live camera and pass it through a number of Image Filters. These filters, in order, are 'Gaussian Blur', 'Edge Detection', and 'Canny Edge Detection'.

The Gaussian Blur filter blurs the pixel data in the image to reduce noise. For each pixel, the filter will take an weighted-average of all pixels within in some distance from the current pixel with weighting such that pixels further from the current pixel have lower effect on the resulting pixel. 

The Edge Detection filter considers each pixel of an image, and outputs a value proportional to the absolute difference between the current pixel and each of it's neighbours. This means that if a given pixel in the input image is identical to it's neighbours (and therefore not part of an edge), the corresponding pixel in the output image will have the value zero. Conversely if a pixel is surrounded by pixels with a very different value, it will output a pixel of very high value.

Finally, the Canny Edge Detection takes the output of the previous filter. For each pixel in the image it's "Intensity Gradient" is calculated. This can be visualized by taking the image as a height-map (That is, a 3D surface were each pixel is a point, and the brighter the point the higher that point is on the surface). For each pixel, its "Intensity Gradient" will be angle at which the surface "slopes" downwards. For each pixel, the "positive direction" is the direction in that angle, and the "negative direction" is the opposite direction. For each pixel, the adjacent pixel in both the current and negative directions are considered. If it is the current pixel is greatest of the three pixels, the output is white. Otherwise the output is black.

The result of these filters should be an image with all edges highlighted in white, and with a sufficiently low resolution image, this calculation should be possible to achieve in real time. The simplest way to use this image to support the lane following behaviour is to take a pixel in the centre of the image, and find the distance from that pixel to the first white pixel in both the positive X and negative X directions. If the positive X direction has a lower distance, than we should turn left, and otherwise should turn right. This approach can be improved by taking multiple samples down the centre line of the image, and take an average. 
